add_namespace = ITA_inner_circle
add_namespace = ITA_inner_circle.graziani
add_namespace = ITA_inner_circle.balbo
add_namespace = ITA_inner_circle.grandi
add_namespace = ITA_inner_circle.ciano
add_namespace = ITA_inner_circle.ricci
add_namespace = ITA_inner_circle.bottai
add_namespace = ITA_inner_circle.acerbo

country_event = {
	id = ITA_inner_circle.1
	title = ITA_inner_circle.1.t
	desc = ITA_inner_circle.1.desc

	#picture = "[GetItalyAscendingAdvisorPortrait]"

	is_triggered_only = yes

	immediate = {
		set_country_flag = ITA_inner_circle_event_pending_flag
	}

	option = {
		name = ITA_inner_circle.1.a

		ITA_remove_replaced_advisor_1_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_1 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.1.b

		ITA_remove_replaced_advisor_2_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_2 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.1.c

		ITA_remove_replaced_advisor_3_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_3 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.1.d
		country_event = ITA_inner_circle.2
	}
}

country_event = {
	id = ITA_inner_circle.2
	title = ITA_inner_circle.2.t
	desc = ITA_inner_circle.2.desc

	#picture = "[GetItalyAscendingAdvisorPortrait]"

	is_triggered_only = yes

	immediate = {
		set_country_flag = ITA_inner_circle_event_pending_flag
	}

	option = {
		name = ITA_inner_circle.2.a

		ITA_remove_replaced_advisor_4_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_4 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.2.b

		if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 1 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_graziani
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 2 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_balbo
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_grandi
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_ciano
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_ricci
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_bottai
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_acerbo
			}
		}

		hidden_effect = {
			hidden_effect = {
				clear_variable = ITA_ascending_advisor
				clr_country_flag = ITA_inner_circle_event_pending_flag
			}
		}
	}

	option = {
		name = ITA_inner_circle.2.c

		country_event = ITA_inner_circle.1
	}
}

@inner_circle_time_tier_1 = 140
@inner_circle_time_tier_2 = 140
@inner_circle_time_tier_3 = 210
# FLAG CONSTANTS (It is 1 day more so the tooltip and days shown in the focus about Focus Progress match exactly the moment when the focus is completed)
@inner_circle_time_tier_1_flag = 141
@inner_circle_time_tier_2_flag = 141
@inner_circle_time_tier_3_flag = 211

country_event = {
	id = ITA_inner_circle.namespace.test

	title = ITA_inner_circle.namespace.test.t

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = YES
	}

	option = {
		name = NO
	}
}

country_event = {
	id = ITA_inner_circle.graziani.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_graziani
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 1 }
			check_variable = { ITA_ascended_advisor_2 = 1 }
			check_variable = { ITA_ascended_advisor_3 = 1 }
			check_variable = { ITA_ascended_advisor_4 = 1 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_graziani_theory }
			}
			activate_shine_on_focus = ITA_inner_circle_graziani_theory
			set_country_flag = { 
				flag = ITA_inner_circle_graziani_theory_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.graziani.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_graziani_armed_blackshirts
				}
			}
			activate_shine_on_focus = ITA_inner_circle_graziani_armed_blackshirts
			set_country_flag = {
				flag = ITA_inner_circle_graziani_armed_blackshirts_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.graziani.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_setting_of_again_from_roma }
				NOT = { has_shine_effect_on_focus = ITA_inner_circle_setting_of_again_from_roma } #Balbo is working on this already
				#NOT = { check_variable = { GER_industrialist_prevailed = 2 } } #Speer Prevailed in the Industrialist Intrigue
				#NOT = { check_variable = { GER_industrialist_prevailed = 3 } } #Göring Prevailed in the Industrialist Intrigue
			}
			activate_shine_on_focus = ITA_inner_circle_setting_of_again_from_roma
			set_country_flag = {
				flag = ITA_inner_circle_setting_of_again_from_roma_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.graziani.complete
				days = @inner_circle_time_tier_1
			}
			set_variable = { ITA_inner_circle_setting_of_again_from_roma_focus_advisor = 1 }
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Graziani FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.graziani.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_graziani
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 1 }
			check_variable = { ITA_ascended_advisor_2 = 1 }
			check_variable = { ITA_ascended_advisor_3 = 1 }
			check_variable = { ITA_ascended_advisor_4 = 1 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_graziani_theory
			}
			complete_national_focus = {
				focus = ITA_inner_circle_graziani_theory
				use_side_message = yes
				originator_name = ITA_rodolfo_graziani
			}
			clr_country_flag = ITA_inner_circle_graziani_theory_in_progress_flag
			country_event = {
				id = ITA_inner_circle.graziani.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_graziani_armed_blackshirts
			}
			complete_national_focus = {
				focus = ITA_inner_circle_graziani_armed_blackshirts
				use_side_message = yes
				originator_name = ITA_rodolfo_graziani
			}
			clr_country_flag = ITA_inner_circle_graziani_armed_blackshirts_in_progress_flag
			country_event = {
				id = ITA_inner_circle.graziani.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_setting_of_again_from_roma
				check_variable = { ITA_inner_circle_setting_of_again_from_roma_focus_advisor = 1 }
			}
			complete_national_focus = {
				focus = ITA_inner_circle_setting_of_again_from_roma
				use_side_message = yes
				originator_name = ITA_rodolfo_graziani
			}
			clr_country_flag = ITA_inner_circle_setting_of_again_from_roma_in_progress_flag
		}
		else = { # Debug logs
			#log = "Graziani Focuses HAS BEEN COMPLETE"
		}
	}
}

country_event = {
	id = ITA_inner_circle.balbo.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_balbo
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 2 }
			check_variable = { ITA_ascended_advisor_2 = 2 }
			check_variable = { ITA_ascended_advisor_3 = 2 }
			check_variable = { ITA_ascended_advisor_4 = 2 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_balbo_national_flight_movent }
			}
			activate_shine_on_focus = ITA_inner_circle_balbo_national_flight_movent
			set_country_flag = { 
				flag = ITA_inner_circle_balbo_national_flight_movent_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.balbo.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_balbo_modern_air_force
				}
			}
			activate_shine_on_focus = ITA_inner_circle_balbo_modern_air_force
			set_country_flag = {
				flag = ITA_inner_circle_balbo_modern_air_force_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.balbo.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_setting_of_again_from_roma }
				NOT = { has_shine_effect_on_focus = ITA_inner_circle_setting_of_again_from_roma } #Balbo is working on this already
				#NOT = { check_variable = { GER_industrialist_prevailed = 2 } } #Speer Prevailed in the Industrialist Intrigue
				#NOT = { check_variable = { GER_industrialist_prevailed = 3 } } #Göring Prevailed in the Industrialist Intrigue
			}
			activate_shine_on_focus = ITA_inner_circle_setting_of_again_from_roma
			set_country_flag = {
				flag = ITA_inner_circle_setting_of_again_from_roma_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.balbo.complete
				days = @inner_circle_time_tier_1
			}
			set_variable = { ITA_inner_circle_setting_of_again_from_roma_focus_advisor = 2 }
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.balbo.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_balbo
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 2 }
			check_variable = { ITA_ascended_advisor_2 = 2 }
			check_variable = { ITA_ascended_advisor_3 = 2 }
			check_variable = { ITA_ascended_advisor_4 = 2 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_balbo_national_flight_movent
			}
			complete_national_focus = {
				focus = ITA_inner_circle_balbo_national_flight_movent
				use_side_message = yes
				originator_name = ITA_italo_balbo
			}
			clr_country_flag = ITA_inner_circle_balbo_national_flight_movent_in_progress_flag
			country_event = {
				id = ITA_inner_circle.balbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_balbo_modern_air_force
			}
			complete_national_focus = {
				focus = ITA_inner_circle_balbo_modern_air_force
				use_side_message = yes
				originator_name = ITA_italo_balbo
			}
			clr_country_flag = ITA_inner_circle_balbo_modern_air_force_in_progress_flag
			country_event = {
				id = ITA_inner_circle.balbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_setting_of_again_from_roma
				check_variable = { ITA_inner_circle_setting_of_again_from_roma_focus_advisor = 2 }
			}
			complete_national_focus = {
				focus = ITA_inner_circle_setting_of_again_from_roma
				use_side_message = yes
				originator_name = ITA_italo_balbo
			}
			clr_country_flag = ITA_inner_circle_setting_of_again_from_roma_in_progress_flag
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}

country_event = {
	id = ITA_inner_circle.ricci.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_ricci
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 5 }
			check_variable = { ITA_ascended_advisor_2 = 5 }
			check_variable = { ITA_ascended_advisor_3 = 5 }
			check_variable = { ITA_ascended_advisor_4 = 5 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_ricci_OND }
			}
			activate_shine_on_focus = ITA_inner_circle_ricci_OND
			set_country_flag = { 
				flag = ITA_inner_circle_ricci_OND_in_progress_flag
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.ricci.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_ricci_nationale_mediate
				}
			}
			activate_shine_on_focus = ITA_inner_circle_ricci_nationale_mediate
			set_country_flag = {
				flag = ITA_inner_circle_ricci_nationale_mediate_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.ricci.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_ricci_grapple_with_key_issues_to_goverence
				}
			}
			activate_shine_on_focus = ITA_inner_circle_ricci_grapple_with_key_issues_to_goverence
			set_country_flag = {
				flag = ITA_inner_circle_ricci_grapple_with_key_issues_to_goverence_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.ricci.complete
				days = @inner_circle_time_tier_1
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.ricci.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_ricci
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 5 }
			check_variable = { ITA_ascended_advisor_2 = 5 }
			check_variable = { ITA_ascended_advisor_3 = 5 }
			check_variable = { ITA_ascended_advisor_4 = 5 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ricci_OND
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ricci_OND
				use_side_message = yes
				originator_name = ITA_renato_ricci
			}
			clr_country_flag = ITA_inner_circle_ricci_OND_in_progress_flag
			country_event = {
				id = ITA_inner_circle.ricci.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ricci_nationale_mediate
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ricci_nationale_mediate
				use_side_message = yes
				originator_name = ITA_renato_ricci
			}
			clr_country_flag = ITA_inner_circle_ricci_nationale_mediate_in_progress_flag
			country_event = {
				id = ITA_inner_circle.balbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ricci_grapple_with_key_issues_to_goverence
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ricci_grapple_with_key_issues_to_goverence
				use_side_message = yes
				originator_name = ITA_renato_ricci
			}
			clr_country_flag = ITA_inner_circle_ricci_grapple_with_key_issues_to_goverence_in_progress_flag
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}

country_event = {
	id = ITA_inner_circle.bottai.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_bottai
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 6 }
			check_variable = { ITA_ascended_advisor_2 = 6 }
			check_variable = { ITA_ascended_advisor_3 = 6 }
			check_variable = { ITA_ascended_advisor_4 = 6 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_bottai_elementary_education_law }
			}
			activate_shine_on_focus = ITA_inner_circle_bottai_elementary_education_law
			set_country_flag = { 
				flag = ITA_inner_circle_bottai_elementary_education_law_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.bottai.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_bottai_tracking_in_secondary_education
				}
			}
			activate_shine_on_focus = ITA_inner_circle_bottai_tracking_in_secondary_education
			set_country_flag = {
				flag = ITA_inner_circle_bottai_tracking_in_secondary_education_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.bottai.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_bottai_education_sector_a_black_line
				}
			}
			activate_shine_on_focus = ITA_inner_circle_bottai_education_sector_a_black_line
			set_country_flag = {
				flag = ITA_inner_circle_bottai_education_sector_a_black_line_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.bottai.complete
				days = @inner_circle_time_tier_1
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.bottai.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_bottai
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 6 }
			check_variable = { ITA_ascended_advisor_2 = 6 }
			check_variable = { ITA_ascended_advisor_3 = 6 }
			check_variable = { ITA_ascended_advisor_4 = 6 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_bottai_elementary_education_law
			}
			complete_national_focus = {
				focus = ITA_inner_circle_bottai_elementary_education_law
				use_side_message = yes
				originator_name = ITA_giuseppe_bottai
			}
			clr_country_flag = ITA_inner_circle_bottai_elementary_education_law_in_progress_flag
			country_event = {
				id = ITA_inner_circle.bottai.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_bottai_tracking_in_secondary_education
			}
			complete_national_focus = {
				focus = ITA_inner_circle_bottai_tracking_in_secondary_education
				use_side_message = yes
				originator_name = ITA_giuseppe_bottai
			}
			clr_country_flag = ITA_inner_circle_bottai_tracking_in_secondary_education_in_progress_flag
			country_event = {
				id = ITA_inner_circle.bottai.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_bottai_education_sector_a_black_line
			}
			complete_national_focus = {
				focus = ITA_inner_circle_bottai_education_sector_a_black_line
				use_side_message = yes
				originator_name = ITA_giuseppe_bottai
			}
			clr_country_flag = ITA_inner_circle_bottai_education_sector_a_black_line_in_progress_flag
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}

## CIANO FOCUS EVENT ##

country_event = {
	id = ITA_inner_circle.ciano.00

	title = ITA_inner_circle.ciano.00.t
	desc = ITA_inner_circle.ciano.00.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.ciano.00.a
		ai_chance = {
			base = 100
		}
		custom_effect_tooltip = ITA_inner_circle_ciano_unwilling_to_repent_tt

		hidden_effect = {
			ITA_gian_galeazzo_ciano = { set_character_flag = ITA_ciano_unrepent_flag } 
			country_event = {
				id = ITA_inner_circle.ciano.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.ciano.00.b
		ai_chance = {
			base = 100
		}
		custom_effect_tooltip = ITA_inner_circle_ciano_willing_to_repent_tt

		hidden_effect = {
			ITA_gian_galeazzo_ciano = { set_character_flag = ITA_ciano_repent_flag } 
			country_event = {
				id = ITA_inner_circle.ciano.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}
}

country_event = {
	id = ITA_inner_circle.ciano.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_ciano
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 4 }
			check_variable = { ITA_ascended_advisor_2 = 4 }
			check_variable = { ITA_ascended_advisor_3 = 4 }
			check_variable = { ITA_ascended_advisor_4 = 4 }
		}
	}

	immediate = {
		if = {
			limit = {
				ITA_gian_galeazzo_ciano = {
					has_character_flag = ITA_ciano_unrepent_flag
				}
			}
			if = {
				limit = {
					NOT = { has_completed_focus = ITA_inner_circle_ciano_rectify }
				}
				activate_shine_on_focus = ITA_inner_circle_ciano_rectify
				set_country_flag = { 
					flag = ITA_inner_circle_ciano_rectify_in_progress_flag 
					days = @inner_circle_time_tier_1_flag 
					value = 1 
				}
				country_event = {
					id = ITA_inner_circle.ciano.complete
					days = @inner_circle_time_tier_1
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_completed_focus = ITA_inner_circle_ciano_the_three_guidelines
					}
				}
				activate_shine_on_focus = ITA_inner_circle_ciano_the_three_guidelines
				set_country_flag = {
					flag = ITA_inner_circle_ciano_the_three_guidelines_in_progress_flag
					days = @inner_circle_time_tier_1_flag
					value = 1
				}
				country_event = {
					id = ITA_inner_circle.ciano.complete
					days = @inner_circle_time_tier_1
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_completed_focus = ITA_inner_circle_ciano_the_real_steel_company
					}
				}
				activate_shine_on_focus = ITA_inner_circle_ciano_the_real_steel_company
				set_country_flag = {
					flag = ITA_inner_circle_ciano_the_real_steel_company_in_progress_flag
					days = @inner_circle_time_tier_1_flag
					value = 1
				}
				country_event = {
					id = ITA_inner_circle.ciano.complete
					days = @inner_circle_time_tier_1
				}
			}
		}
		else_if = {
			limit = {
				ITA_gian_galeazzo_ciano = {
					has_character_flag = ITA_ciano_repent_flag
				}
			}
			if = {
				limit = {
					NOT = { has_completed_focus = ITA_inner_circle_ciano_never_overturn_a_verdict }
				}
				activate_shine_on_focus = ITA_inner_circle_ciano_never_overturn_a_verdict
				set_country_flag = { 
					flag = ITA_inner_circle_ciano_never_overturn_a_verdict_in_progress_flag 
					days = @inner_circle_time_tier_1_flag 
					value = 1 
				}
				country_event = {
					id = ITA_inner_circle.ciano.complete
					days = @inner_circle_time_tier_1
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_completed_focus = ITA_inner_circle_ciano_the_first_half_of_my_life
					}
				}
				activate_shine_on_focus = ITA_inner_circle_ciano_the_first_half_of_my_life
				set_country_flag = {
					flag = ITA_inner_circle_ciano_the_first_half_of_my_life_in_progress_flag
					days = @inner_circle_time_tier_1_flag
					value = 1
				}
				country_event = {
					id = ITA_inner_circle.ciano.complete
					days = @inner_circle_time_tier_1
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_completed_focus = ITA_inner_circle_ciano_the_real_steel_company
					}
				}
				activate_shine_on_focus = ITA_inner_circle_ciano_the_real_steel_company
				set_country_flag = {
					flag = ITA_inner_circle_ciano_the_real_steel_company_in_progress_flag
					days = @inner_circle_time_tier_1_flag
					value = 1
				}
				country_event = {
					id = ITA_inner_circle.ciano.complete
					days = @inner_circle_time_tier_1
				}
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.ciano.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_ciano
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 4 }
			check_variable = { ITA_ascended_advisor_2 = 4 }
			check_variable = { ITA_ascended_advisor_3 = 4 }
			check_variable = { ITA_ascended_advisor_4 = 4 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ciano_rectify
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ciano_rectify
				use_side_message = yes
				originator_name = ITA_galeazzo_ciano
			}
			clr_country_flag = ITA_inner_circle_ciano_rectify_in_progress_flag
			country_event = {
				id = ITA_inner_circle.ciano.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ciano_the_three_guidelines
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ciano_the_three_guidelines
				use_side_message = yes
				originator_name = ITA_galeazzo_ciano
			}
			clr_country_flag = ITA_inner_circle_ciano_the_three_guidelines_in_progress_flag
			country_event = {
				id = ITA_inner_circle.ciano.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ciano_never_overturn_a_verdict
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ciano_never_overturn_a_verdict
				use_side_message = yes
				originator_name = ITA_galeazzo_ciano
			}
			clr_country_flag = ITA_inner_circle_ciano_never_overturn_a_verdict_in_progress_flag
			country_event = {
				id = ITA_inner_circle.ciano.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ciano_the_first_half_of_my_life
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ciano_the_first_half_of_my_life
				use_side_message = yes
				originator_name = ITA_galeazzo_ciano
			}
			clr_country_flag = ITA_inner_circle_ciano_the_first_half_of_my_life_in_progress_flag
			country_event = {
				id = ITA_inner_circle.ciano.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ciano_the_real_steel_company
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ciano_the_real_steel_company
				use_side_message = yes
				originator_name = ITA_galeazzo_ciano
			}
			clr_country_flag = ITA_inner_circle_ciano_the_real_steel_company_in_progress_flag
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}

## ACERBO FOCUS EVENT ##

country_event = {
	id = ITA_inner_circle.acerbo.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_acerbo
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 7 }
			check_variable = { ITA_ascended_advisor_2 = 7 }
			check_variable = { ITA_ascended_advisor_3 = 7 }
			check_variable = { ITA_ascended_advisor_4 = 7 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_acerbo_land_redistribution }
			}
			activate_shine_on_focus = ITA_inner_circle_acerbo_land_redistribution
			set_country_flag = { 
				flag = ITA_inner_circle_acerbo_land_redistribution_in_progress_flag 
				days = @inner_circle_time_tier_1_flag
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.acerbo.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_acerbo_agricultural_collectivization
				}
			}
			activate_shine_on_focus = ITA_inner_circle_acerbo_agricultural_collectivization
			set_country_flag = {
				flag = ITA_inner_circle_acerbo_agricultural_collectivization_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.acerbo.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_acerbo_corporatist_agricultural_modernization
				}
			}
			activate_shine_on_focus = ITA_inner_circle_acerbo_corporatist_agricultural_modernization
			set_country_flag = {
				flag = ITA_inner_circle_acerbo_corporatist_agricultural_modernization_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.acerbo.complete
				days = @inner_circle_time_tier_1
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.acerbo.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_acerbo
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 7 }
			check_variable = { ITA_ascended_advisor_2 = 7 }
			check_variable = { ITA_ascended_advisor_3 = 7 }
			check_variable = { ITA_ascended_advisor_4 = 7 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_acerbo_land_redistribution
			}
			complete_national_focus = {
				focus = ITA_inner_circle_acerbo_land_redistribution
				use_side_message = yes
				originator_name = ITA_giacomo_acerbo
			}
			clr_country_flag = ITA_inner_circle_acerbo_land_redistribution_in_progress_flag
			country_event = {
				id = ITA_inner_circle.acerbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_acerbo_agricultural_collectivization
			}
			complete_national_focus = {
				focus = ITA_inner_circle_acerbo_agricultural_collectivization
				use_side_message = yes
				originator_name = ITA_giacomo_acerbo
			}
			clr_country_flag = ITA_inner_circle_acerbo_agricultural_collectivization_in_progress_flag
			country_event = {
				id = ITA_inner_circle.acerbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_acerbo_corporatist_agricultural_modernization
			}
			complete_national_focus = {
				focus = ITA_inner_circle_acerbo_corporatist_agricultural_modernization
				use_side_message = yes
				originator_name = ITA_giacomo_acerbo
			}
			clr_country_flag = ITA_inner_circle_acerbo_corporatist_agricultural_modernization_in_progress_flag
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}

## GRANDI FOCUS EVENT ##

country_event = {
	id = ITA_inner_circle.grandi.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_grandi
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 3 }
			check_variable = { ITA_ascended_advisor_2 = 3 }
			check_variable = { ITA_ascended_advisor_3 = 3 }
			check_variable = { ITA_ascended_advisor_4 = 3 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_grandi_civil_code }
			}
			activate_shine_on_focus = ITA_inner_circle_grandi_civil_code
			set_country_flag = { 
				flag = ITA_inner_circle_grandi_civil_code_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.grandi.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_grandi_advancing_law-based_governance }
			}
			activate_shine_on_focus = ITA_inner_circle_grandi_advancing_law-based_governance
			set_country_flag = { 
				flag = ITA_inner_circle_grandi_advancing_law-based_governance_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.grandi.complete
				days = @inner_circle_time_tier_1
			}
		}
		#else_if = {
		#	limit = {
		#		NOT = {
		#			has_completed_focus = ITA_inner_circle_acerbo_agricultural_collectivization
		#		}
		#	}
		#	activate_shine_on_focus = ITA_inner_circle_acerbo_agricultural_collectivization
		#	set_country_flag = {
		#		flag = ITA_inner_circle_acerbo_agricultural_collectivization_in_progress_flag
		#		days = @inner_circle_time_tier_1_flag
		#		value = 1
		#	}
		#	country_event = {
		#		id = ITA_inner_circle.acerbo.complete
		#		days = @inner_circle_time_tier_1
		#	}
		#}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.grandi.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_grandi
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 3 }
			check_variable = { ITA_ascended_advisor_2 = 3 }
			check_variable = { ITA_ascended_advisor_3 = 3 }
			check_variable = { ITA_ascended_advisor_4 = 3 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_grandi_civil_code
			}
			complete_national_focus = {
				focus = ITA_inner_circle_grandi_civil_code
				use_side_message = yes
				originator_name = ITA_dino_grandi
			}
			clr_country_flag = ITA_inner_circle_grandi_civil_code_in_progress_flag
			country_event = {
				id = ITA_inner_circle.grandi.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_grandi_advancing_law-based_governance
			}
			complete_national_focus = {
				focus = ITA_inner_circle_grandi_advancing_law-based_governance
				use_side_message = yes
				originator_name = ITA_dino_grandi
			}
			clr_country_flag = ITA_inner_circle_grandi_advancing_law-based_governance_in_progress_flag
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}
