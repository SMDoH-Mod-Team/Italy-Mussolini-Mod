add_namespace = ITA_inner_circle
add_namespace = ITA_inner_circle.graziani
add_namespace = ITA_inner_circle.balbo
add_namespace = ITA_inner_circle.grandi
add_namespace = ITA_inner_circle.ciano
add_namespace = ITA_inner_circle.ricci
add_namespace = ITA_inner_circle.bottai
add_namespace = ITA_inner_circle.acerbo

country_event = {
	id = ITA_inner_circle.1
	title = ITA_inner_circle.1.t
	desc = ITA_inner_circle.1.desc

	#picture = "[GetItalyAscendingAdvisorPortrait]"

	is_triggered_only = yes

	immediate = {
		set_country_flag = ITA_inner_circle_event_pending_flag
	}

	option = {
		name = ITA_inner_circle.1.a

		ITA_remove_replaced_advisor_1_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_1 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.1.b

		ITA_remove_replaced_advisor_2_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_2 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.1.c

		ITA_remove_replaced_advisor_3_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_3 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.1.d
		country_event = ITA_inner_circle.2
	}
}

country_event = {
	id = ITA_inner_circle.2
	title = ITA_inner_circle.2.t
	desc = ITA_inner_circle.2.desc

	#picture = "[GetItalyAscendingAdvisorPortrait]"

	is_triggered_only = yes

	immediate = {
		set_country_flag = ITA_inner_circle_event_pending_flag
	}

	option = {
		name = ITA_inner_circle.2.a

		ITA_remove_replaced_advisor_4_effects = yes

		custom_effect_tooltip = generic_skip_one_line_tt

		set_variable = { ITA_ascended_advisor_4 = ITA_ascending_advisor }
		ITA_add_replacing_advisor_effects = yes

		hidden_effect = {
			clear_variable = ITA_ascending_advisor
			clr_country_flag = ITA_inner_circle_event_pending_flag
		}
	}

	option = {
		name = ITA_inner_circle.2.b

		if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 1 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_graziani
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 2 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_balbo
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_grandi
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_ciano
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_ricci
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_bottai
			}
		}
		else_if = {
			limit = {
				check_variable = { ITA_ascending_advisor = 3 }
			}
			uncomplete_national_focus = {
				focus = ITA_ascension_of_acerbo
			}
		}

		hidden_effect = {
			hidden_effect = {
				clear_variable = ITA_ascending_advisor
				clr_country_flag = ITA_inner_circle_event_pending_flag
			}
		}
	}

	option = {
		name = ITA_inner_circle.2.c

		country_event = ITA_inner_circle.1
	}
}

@inner_circle_time_tier_1 = 140
@inner_circle_time_tier_2 = 140
@inner_circle_time_tier_3 = 210
# FLAG CONSTANTS (It is 1 day more so the tooltip and days shown in the focus about Focus Progress match exactly the moment when the focus is completed)
@inner_circle_time_tier_1_flag = 141
@inner_circle_time_tier_2_flag = 141
@inner_circle_time_tier_3_flag = 211

country_event = {
	id = ITA_inner_circle.namespace.test

	title = ITA_inner_circle.namespace.test.t

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = YES
	}

	option = {
		name = NO
	}
}

country_event = {
	id = ITA_inner_circle.graziani.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_graziani
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 1 }
			check_variable = { ITA_ascended_advisor_2 = 1 }
			check_variable = { ITA_ascended_advisor_3 = 1 }
			check_variable = { ITA_ascended_advisor_4 = 1 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_graziani_theory }
			}
			activate_shine_on_focus = ITA_inner_circle_graziani_theory
			set_country_flag = { 
				flag = ITA_inner_circle_graziani_theory_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.graziani.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_graziani_armed_blackshirts
				}
			}
			activate_shine_on_focus = ITA_inner_circle_graziani_armed_blackshirts
			set_country_flag = {
				flag = ITA_inner_circle_graziani_armed_blackshirts_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.graziani.complete
				days = @inner_circle_time_tier_1
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Graziani FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.graziani.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_graziani
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 1 }
			check_variable = { ITA_ascended_advisor_2 = 1 }
			check_variable = { ITA_ascended_advisor_3 = 1 }
			check_variable = { ITA_ascended_advisor_4 = 1 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_graziani_theory
			}
			complete_national_focus = {
				focus = ITA_inner_circle_graziani_theory
				use_side_message = yes
				originator_name = ITA_rodolfo_graziani
			}
			clr_country_flag = ITA_inner_circle_graziani_theory_in_progress_flag
			country_event = {
				id = ITA_inner_circle.graziani.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_graziani_armed_blackshirts
			}
			complete_national_focus = {
				focus = ITA_inner_circle_graziani_armed_blackshirts
				use_side_message = yes
				originator_name = ITA_rodolfo_graziani
			}
			clr_country_flag = ITA_inner_circle_graziani_armed_blackshirts_in_progress_flag
			country_event = {
				id = ITA_inner_circle.graziani.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else = { # Debug logs
			#log = "Graziani Focuses HAS BEEN COMPLETE"
		}
	}
}

country_event = {
	id = ITA_inner_circle.balbo.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_balbo
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 2 }
			check_variable = { ITA_ascended_advisor_2 = 2 }
			check_variable = { ITA_ascended_advisor_3 = 2 }
			check_variable = { ITA_ascended_advisor_4 = 2 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_balbo_national_flight_movent }
			}
			activate_shine_on_focus = ITA_inner_circle_balbo_national_flight_movent
			set_country_flag = { 
				flag = ITA_inner_circle_balbo_national_flight_movent_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.balbo.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_balbo_modern_air_force
				}
			}
			activate_shine_on_focus = ITA_inner_circle_balbo_modern_air_force
			set_country_flag = {
				flag = ITA_inner_circle_balbo_modern_air_force_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.balbo.complete
				days = @inner_circle_time_tier_1
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.balbo.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_balbo
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 2 }
			check_variable = { ITA_ascended_advisor_2 = 2 }
			check_variable = { ITA_ascended_advisor_3 = 2 }
			check_variable = { ITA_ascended_advisor_4 = 2 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_balbo_national_flight_movent
			}
			complete_national_focus = {
				focus = ITA_inner_circle_balbo_national_flight_movent
				use_side_message = yes
				originator_name = ITA_italo_balbo
			}
			clr_country_flag = ITA_inner_circle_balbo_national_flight_movent_in_progress_flag
			country_event = {
				id = ITA_inner_circle.balbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_balbo_modern_air_force
			}
			complete_national_focus = {
				focus = ITA_inner_circle_balbo_modern_air_force
				use_side_message = yes
				originator_name = ITA_italo_balbo
			}
			clr_country_flag = ITA_inner_circle_balbo_modern_air_force_in_progress_flag
			country_event = {
				id = ITA_inner_circle.balbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}

country_event = {
	id = ITA_inner_circle.ricci.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_ricci
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 5 }
			check_variable = { ITA_ascended_advisor_2 = 5 }
			check_variable = { ITA_ascended_advisor_3 = 5 }
			check_variable = { ITA_ascended_advisor_4 = 5 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_ricci_OND }
			}
			activate_shine_on_focus = ITA_inner_circle_ricci_OND
			set_country_flag = { 
				flag = ITA_inner_circle_ricci_OND_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.ricci.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_ricci_nationale_mediate
				}
			}
			activate_shine_on_focus = ITA_inner_circle_ricci_nationale_mediate
			set_country_flag = {
				flag = ITA_inner_circle_ricci_nationale_mediate_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.ricci.complete
				days = @inner_circle_time_tier_1
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.ricci.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_ricci
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 5 }
			check_variable = { ITA_ascended_advisor_2 = 5 }
			check_variable = { ITA_ascended_advisor_3 = 5 }
			check_variable = { ITA_ascended_advisor_4 = 5 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ricci_OND
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ricci_OND
				use_side_message = yes
				originator_name = ITA_renato_ricci
			}
			clr_country_flag = ITA_inner_circle_ricci_OND_in_progress_flag
			country_event = {
				id = ITA_inner_circle.ricci.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_ricci_nationale_mediate
			}
			complete_national_focus = {
				focus = ITA_inner_circle_ricci_nationale_mediate
				use_side_message = yes
				originator_name = ITA_renato_ricci
			}
			clr_country_flag = ITA_inner_circle_ricci_nationale_mediate_in_progress_flag
			country_event = {
				id = ITA_inner_circle.balbo.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}

country_event = {
	id = ITA_inner_circle.bottai.start

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_bottai
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 6 }
			check_variable = { ITA_ascended_advisor_2 = 6 }
			check_variable = { ITA_ascended_advisor_3 = 6 }
			check_variable = { ITA_ascended_advisor_4 = 6 }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_completed_focus = ITA_inner_circle_bottai_elementary_education_law }
			}
			activate_shine_on_focus = ITA_inner_circle_bottai_elementary_education_law
			set_country_flag = { 
				flag = ITA_inner_circle_bottai_elementary_education_law_in_progress_flag 
				days = @inner_circle_time_tier_1_flag 
				value = 1 
			}
			country_event = {
				id = ITA_inner_circle.bottai.complete
				days = @inner_circle_time_tier_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_inner_circle_bottai_tracking_in_secondary_education
				}
			}
			activate_shine_on_focus = ITA_inner_circle_bottai_tracking_in_secondary_education
			set_country_flag = {
				flag = ITA_inner_circle_bottai_tracking_in_secondary_education_in_progress_flag
				days = @inner_circle_time_tier_1_flag
				value = 1
			}
			country_event = {
				id = ITA_inner_circle.ricci.complete
				days = @inner_circle_time_tier_1
			}
		}
		else = { #Debug logs
			#log = "SOMETHING WENT WRONG IN Bolbo FOCUSES"
		}
	}
}

country_event = {
	id = ITA_inner_circle.bottai.complete

	hidden = yes

	is_triggered_only = yes

	trigger = {
		has_completed_focus = ITA_ascension_of_bottai
		OR = {
			check_variable = { ITA_ascended_advisor_1 = 6 }
			check_variable = { ITA_ascended_advisor_2 = 6 }
			check_variable = { ITA_ascended_advisor_3 = 6 }
			check_variable = { ITA_ascended_advisor_4 = 6 }
		}
	}

	immediate = {
		if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_bottai_elementary_education_law
			}
			complete_national_focus = {
				focus = ITA_inner_circle_bottai_elementary_education_law
				use_side_message = yes
				originator_name = ITA_giuseppe_bottai
			}
			clr_country_flag = ITA_inner_circle_bottai_elementary_education_law_in_progress_flag
			country_event = {
				id = ITA_inner_circle.bottai.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else_if = {
			limit = {
				has_shine_effect_on_focus = ITA_inner_circle_bottai_tracking_in_secondary_education
			}
			complete_national_focus = {
				focus = ITA_inner_circle_bottai_tracking_in_secondary_education
				use_side_message = yes
				originator_name = ITA_giuseppe_bottai
			}
			clr_country_flag = ITA_inner_circle_bottai_tracking_in_secondary_education_in_progress_flag
			country_event = {
				id = ITA_inner_circle.bottai.start
				days = ITA_inner_circle_days_to_start_focus
				random_days = ITA_inner_circle_random_days
			}
		}
		else = { # Debug logs
			#log = "Bolbo Focuses HAS BEEN COMPLETE"
		}
	}
}
